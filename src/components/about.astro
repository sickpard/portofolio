---
import { getLangFromUrl, useTranslations } from "@i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Importa tutte le icone
const icons = {
  php: await import("@skills/php.png"),
  laravel: await import("@skills/laravel.png"),
  codeIgniter: await import("@skills/codeIgniter.png"),
  java: await import("@skills/java.png"),
  html: await import("@skills/html.png"),
  css: await import("@skills/css.png"),
  tailwind: await import("@skills/tailwind.png"),
  angular: await import("@skills/angular.png"),
  astro: await import("@skills/astra.png"),
  alpine: await import("@skills/alpine.png"),
  jquery: await import("@skills/jquery.png"),
  sql: await import("@skills/mysql.png"),
};

// Configurazione competenze
const skills = [
  {
    id: "backend", 
    title: "Backend",
    items: [
      { key: "php", icon: icons.php },
      { key: "java", icon: icons.java },
      { key: "laravel", icon: icons.laravel },
      { key: "codeIgniter", icon: icons.codeIgniter },
    ]
  },
  {
    id: "frontend",
    title: "Frontend",
    items: [
      { key: "html", icon: icons.html },
      { key: "css", icon: icons.css },
      { key: "tailwind", icon: icons.tailwind },
      { key: "angular", icon: icons.angular },
      { key: "alpine", icon: icons.alpine },
      { key: "jquery", icon: icons.jquery },
      { key: "astro", icon: icons.astro },
    ]
  },
  {
    id: "database",
    title: "Database",
    items: [
      { key: "sql", icon: icons.sql },
    ]
  }
];
---

<div class="container mx-auto px-4 py-12">
  <!-- Header -->
  <div class="text-center mb-12">
    <h2 class="text-4xl font-bold text-gray-800 mb-4">{t('about.title') || "About Me"}</h2>
    <p class="text-gray-600 max-w-2xl mx-auto">
      {t('about.predesc.1') || "Ciao! ðŸ‘‹ Sono"} 
      <strong class="text-purple-600">{t('global.name') || "Mirko Pardini"}</strong>
      {t('about.predesc.2') || ", specialista backend PHP con una passione per soluzioni scalabili e performanti."}
    </p>
  </div>

  <!-- Competenze -->
  <div class="grid md:grid-cols-2 gap-8 mb-12">
    {skills.map(skills => (
      <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
        <h3 class="text-purple-600 text-xl font-bold mb-4">
          {skills.title}
        </h3>
        
        <div class="flex flex-wrap gap-3">
          {skills.items.map(item => (
            <div class="skill-item">
              <img
                src={item.icon.default.src}
                alt={item.key}
                class="w-6 h-6 object-contain"
                draggable="false"
              />
              {item.key}
            </div>
          ))}
        </div>
      </div>
    ))}
  </div>

  <!-- Filosofia & CTA -->
  <div class="text-center bg-white p-8 rounded-xl shadow-lg border border-gray-100">
    <div class="max-w-2xl mx-auto">
      <h3 class="text-2xl font-bold text-gray-800 mb-4">
        {t('about.why.title') || "PerchÃ© collaborare con me?"}
      </h3>
      <p class="text-gray-600 mb-6">
        {t('about.why.content') || "La programmazione per me Ã¨ risolvere puzzle: cerco sempre la soluzione efficiente, pulita e scalabile. Se hai un progetto o un'idea, trasformiamoli in codice!"}
      </p>
      <a href="#contact" class="cta-button">
        {t('about.cta') || "Parlamo del tuo progetto â†’"}
      </a>
    </div>
  </div>
</div>
<!-- 
<style>
  .skill-item {
    @apply flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg border border-gray-200 text-sm font-medium text-gray-700 transition-all hover:border-purple-200 hover:bg-purple-50;
  }

  .cta-button {
    @apply inline-flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-all font-semibold text-sm;
  }
</style> -->